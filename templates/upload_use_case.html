{% include "header.html" %}

{% block content %}
<form>
    Dataset name: <input type="text" id="dataset-name" name="dataset" placeholder="Enter dataset name" onkeyup="checkInputs()">
    Model name: <input type="text" id="model-name" name="model" placeholder="Enter model name" onkeyup="checkInputs()">
    <br><br>
    Baseline Data: <input type="file" class="upload-btn" id="baseline-upload" accept=".hdf5" disabled onchange="uploadData('baseline')">
    Threshold Data: <input type="file" class="upload-btn" id="threshold-upload" accept=".hdf5" disabled onchange="uploadData('threshold')">
    New Data: <input type="file" class="upload-btn" id="newdata-upload" accept=".hdf5" disabled onchange="uploadData('newdata')">
    Drift Data: <input type="file" class="upload-btn" id="drift-upload" accept=".hdf5" disabled onchange="uploadData('drift')">
    <button type="submit" id="submit-btn" disabled>Submit</button>
</form>

<script type="text/javascript">
    let uploadsCompleted = { baseline: false, threshold: false, newdata: false, drift: false };

    function checkInputs() {
        var dataset = document.getElementById('dataset-name').value;
        var model = document.getElementById('model-name').value;
        var allFilled = dataset && model;

        var uploadButtons = document.getElementsByClassName('upload-btn');
        for (var i = 0; i < uploadButtons.length; i++) {
            uploadButtons[i].disabled = !allFilled;
        }

        checkSubmitButton();
    }

    function uploadData(type) {
        // Update the code here to handle the file upload process
        console.log('Uploading ' + type);
        uploadsCompleted[type] = true;

        // Check if all uploads are completed
        checkSubmitButton();
    }

    function checkSubmitButton() {
        var allUploadsCompleted = Object.values(uploadsCompleted).every(status => status === true);
        var datasetFilled = document.getElementById('dataset-name').value !== '';
        var modelFilled = document.getElementById('model-name').value !== '';

        document.getElementById('submit-btn').disabled = !(allUploadsCompleted && datasetFilled && modelFilled);
    }
</script>
{% endblock %}

{% include "footer.html" %}
